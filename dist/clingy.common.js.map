{"version":3,"file":"clingy.common.js","sources":["esm/src/lookup/CaseSensitivity.js","esm/src/command/CommandMap.js","../node_modules/logby/dist/esm/src/level/Levels.js","../node_modules/logby/dist/esm/src/appender/defaultLoggingAppender.js","../node_modules/lightdash/dist/esm/src/string/distance.js","../node_modules/lightdash/dist/esm/src/array/groupMapReducingBy.js","../node_modules/lightdash/dist/esm/src/array/groupMapBy.js","../node_modules/lightdash/dist/esm/src/string/similar.js","../node_modules/lightdash/dist/esm/src/object/name.js","../node_modules/logby/dist/esm/src/level/matchesLevel.js","../node_modules/logby/dist/esm/src/logger/DefaultLogger.js","../node_modules/logby/dist/esm/src/Logby.js","esm/src/logger.js","esm/src/lookup/ArgumentResolving.js","esm/src/argument/ArgumentMatcher.js","esm/src/command/util/commandUtil.js","esm/src/lookup/result/LookupResult.js","esm/src/lookup/LookupResolver.js","esm/src/parser/InputParser.js","esm/src/Clingy.js"],"sourcesContent":["var CaseSensitivity;\n(function (CaseSensitivity) {\n    CaseSensitivity[CaseSensitivity[\"SENSITIVE\"] = 0] = \"SENSITIVE\";\n    CaseSensitivity[CaseSensitivity[\"INSENSITIVE\"] = 1] = \"INSENSITIVE\";\n})(CaseSensitivity || (CaseSensitivity = {}));\nexport { CaseSensitivity };\n//# sourceMappingURL=CaseSensitivity.js.map","import { forEach, isMap, isObject, isPlainObject } from \"lodash\";\nimport { Clingy } from \"../Clingy\";\nimport { CaseSensitivity } from \"../lookup/CaseSensitivity\";\n/**\n * Map containing {@link Command}s.\n *\n * @private\n */\nclass CommandMap extends Map {\n    constructor(input) {\n        super(CommandMap.getConstructorMap(input));\n    }\n    /**\n     * Creates a new instance with {@link Clingy} options to inherit.\n     *\n     * @param commands Command input to use.\n     * @param options Options for the Clingy instance.\n     */\n    static createWithOptions(commands, options) {\n        if (isMap(commands)) {\n            commands.forEach(val => CommandMap.createWithOptionsHelper(val, options));\n        }\n        else if (isPlainObject(commands)) {\n            forEach(commands, val => CommandMap.createWithOptionsHelper(val, options));\n        }\n        return new CommandMap(commands);\n    }\n    static createWithOptionsHelper(command, options) {\n        if (isPlainObject(command.sub) || isMap(command.sub)) {\n            command.sub = new Clingy(CommandMap.createWithOptions(command.sub, options), options);\n        }\n    }\n    static getConstructorMap(input) {\n        if (isMap(input)) {\n            return Array.from(input.entries());\n        }\n        if (isObject(input)) {\n            return Array.from(Object.entries(input));\n        }\n        return null;\n    }\n    /**\n     * Checks if the map contains a key, ignoring case.\n     *\n     * @param key Key to check for.\n     * @param caseSensitivity Case sensitivity to use.\n     * @return If the map contains a key, ignoring case.\n     */\n    hasCommand(key, caseSensitivity) {\n        if (caseSensitivity === CaseSensitivity.INSENSITIVE) {\n            return Array.from(this.keys())\n                .map(k => k.toLowerCase())\n                .includes(key.toLowerCase());\n        }\n        return this.has(key);\n    }\n    /**\n     * Returns the value for the key, ignoring case.\n     *\n     * @param key Key to check for.\n     * @param caseSensitivity Case sensitivity to use.\n     * @return The value for the key, ignoring case.\n     */\n    getCommand(key, caseSensitivity) {\n        if (caseSensitivity === CaseSensitivity.INSENSITIVE) {\n            let result = null;\n            this.forEach((value, k) => {\n                if (key.toLowerCase() === k.toLowerCase()) {\n                    result = value;\n                }\n            });\n            return result;\n        }\n        // Return null instead of undefined to be backwards compatible.\n        return this.has(key) ? this.get(key) : null;\n    }\n}\nexport { CommandMap };\n//# sourceMappingURL=CommandMap.js.map","/**\n * Default level-list. Can be used to set the level of a {@link Logby} instance.\n *\n * @public\n */\nconst Levels = {\n    NONE: {\n        val: -1\n    },\n    ERROR: {\n        name: \"ERROR\",\n        val: 0\n    },\n    WARN: {\n        name: \"WARN\",\n        val: 1\n    },\n    INFO: {\n        name: \"INFO\",\n        val: 2\n    },\n    DEBUG: {\n        name: \"DEBUG\",\n        val: 3\n    },\n    TRACE: {\n        name: \"TRACE\",\n        val: 4\n    }\n};\nexport { Levels };\n//# sourceMappingURL=Levels.js.map","import { Levels } from \"../level/Levels\";\n/**\n * Helper method for creating log entry prefix.\n *\n * @private\n * @param name Name of the logger instance.\n * @param level Level of the entry to log.\n * @returns Log entry prefix.\n */\nconst createDefaultLogPrefix = (name, level) => `${new Date().toISOString()} ${level.name} ${name}`;\n/**\n * Default appender, doing the actual logging.\n *\n * @public\n * @param name Name of the logger instance.\n * @param level Level of the entry to log.\n * @param args Arguments to log.\n */\nconst defaultLoggingAppender = (name, level, args) => {\n    let loggerFn = console.log;\n    if (level === Levels.ERROR) {\n        loggerFn = console.error;\n    }\n    else if (level === Levels.WARN) {\n        loggerFn = console.warn;\n    }\n    else if (level === Levels.INFO) {\n        loggerFn = console.info;\n    }\n    loggerFn(createDefaultLogPrefix(name, level), ...args);\n};\nexport { defaultLoggingAppender, createDefaultLogPrefix };\n//# sourceMappingURL=defaultLoggingAppender.js.map","// Noinspection SpellCheckingInspection\n/**\n * Returns the levenshtein string distance of two strings.\n *\n * @since 6.3.0\n * @memberOf String\n * @param str1 First string to compare.\n * @param str2 Second string to compare.\n * @returns Distance between the two strings.\n * @example\n * distance(\"Kitten\", \"Sitting\")\n * // => 3\n *\n * distance(\"String\", \"Stribng\")\n * // => 1\n *\n * distance(\"foo\", \"foo\")\n * // => 0\n */\nconst distance = (str1, str2) => {\n    if (str1.length === 0) {\n        return str2.length;\n    }\n    if (str2.length === 0) {\n        return str1.length;\n    }\n    const matrix = [];\n    for (let y = 0; y <= str2.length; y++) {\n        matrix[y] = [y];\n    }\n    for (let x = 0; x <= str1.length; x++) {\n        matrix[0][x] = x;\n    }\n    for (let y = 1; y <= str2.length; y++) {\n        const matrixColumnCurrent = matrix[y];\n        const matrixColumnLast = matrix[y - 1];\n        for (let x = 1; x <= str1.length; x++) {\n            if (str2.charAt(y - 1) === str1.charAt(x - 1)) {\n                matrixColumnCurrent[x] = matrixColumnLast[x - 1];\n            }\n            else {\n                const substitution = matrixColumnLast[x - 1] + 1;\n                const insertion = matrixColumnCurrent[x - 1] + 1;\n                const deletion = matrixColumnLast[x] + 1;\n                matrixColumnCurrent[x] = Math.min(substitution, insertion, deletion);\n            }\n        }\n    }\n    return matrix[str2.length][str1.length];\n};\nexport { distance };\n//# sourceMappingURL=distance.js.map","import { forEach } from \"lodash\";\n/**\n * Collects elements in an array into a an array of merged elements.\n *\n * @since 11.0.0\n * @memberOf Array\n * @param collection Collection to group.\n * @param keyProducer Function returning the key for the value.\n * @param initializer Function initializing a new mergable object.\n * @param reducer Consumer mutating the existing object with the new data.\n * @returns Grouped and merged map.\n * @example\n * groupMapReducingBy(\n *     [\"foo\", \"bar\", \"fizz\", \"buzz\"],\n *     val => val.charAt(0),\n *     () => {\n *        return {\n *            count: 0,\n *            matches: []\n *        };\n *     },\n *     (current, val) => {\n *         current.count++;\n *         current.matches.push(val);\n *         return current;\n *     }\n * )\n * // => Map{\"f\": {count: 2, matches: [\"foo\", \"fizz\"]}, \"b\": {count: 2, matches: [\"bar\", \"buzz\"]}}\n */\nconst groupMapReducingBy = (collection, keyProducer, initializer, reducer) => {\n    const result = new Map();\n    forEach(collection, (value, index) => {\n        const key = keyProducer(value, index, collection);\n        if (!result.has(key)) {\n            result.set(key, initializer(value, index, collection));\n        }\n        result.set(key, reducer(result.get(key), value, index, collection));\n    });\n    return result;\n};\nexport { groupMapReducingBy };\n//# sourceMappingURL=groupMapReducingBy.js.map","import { concat } from \"lodash\";\nimport { groupMapReducingBy } from \"./groupMapReducingBy\";\n/**\n * Collects the values of an array in a map as array values,\n * using the return value of the function as key.\n *\n * @since 6.1.0\n * @memberOf Array\n * @param collection Collection to group.\n * @param keyFn Function to use for grouping.\n * @returns Grouped map.\n * @example\n * groupMapBy([1, 2, 3, 4, 5], val => val % 2)\n * // => Map{0: [2, 4], 1: [1, 3, 5]}\n */\nconst groupMapBy = (collection, keyFn) => groupMapReducingBy(collection, keyFn, () => [], (current, value) => concat(current, value));\nexport { groupMapBy };\n//# sourceMappingURL=groupMapBy.js.map","import { groupMapBy } from \"../array/groupMapBy\";\nimport { distance } from \"./distance\";\n// Noinspection SpellCheckingInspection\n/**\n * Returns strings similar to the input based its levenshtein distance to the values in the list given.\n *\n * @since 6.3.0\n * @memberOf String\n * @param str String to check.\n * @param collection Array of values to compare the string to.\n * @param returnFull If the full map should be returned, rather than just the closest matches.\n * @returns Array of the closest matches, or the map if `returnFull` is true.\n * @example\n * similar(\"Fob\", [\"Foo\", \"Bar\"])\n * // => [\"Foo\"]\n *\n * similar(\"cmmit\", [\"init\", \"commit\", \"push\"])\n * // => [\"commit\"]\n *\n * similar(\"Kitten\", [\"Sitten\", \"Sitting\", \"Bitten\"])\n * // => [\"Sitten\", \"Bitten\"]\n *\n * similar(\"cmmit\", [\"init\", \"commit\", \"push\"], true)\n * // => Map<number, string[]>{1: [\"commit\"], 3: [\"init\"], 5: [\"push\"]}\n */\nconst similar = (str, collection, returnFull = false) => {\n    const result = groupMapBy(collection, (value) => distance(str, value));\n    if (returnFull) {\n        return result;\n    }\n    const lowestKey = Math.min(...result.keys());\n    return result.get(lowestKey);\n};\nexport { similar };\n//# sourceMappingURL=similar.js.map","import { isObject, isString, isSymbol } from \"lodash\";\n/**\n * Gets name of a value.\n *\n * If the value has a name or description property, the value of that is returned.\n * If the value is a string, it is returned as is.\n * Otherwise null is returned.\n *\n * @since 10.2.0\n * @memberOf Object\n * @param value Value to check.\n * @returns The name of the value.\n * @example\n * name(class Foo{})\n * // => \"Foo\"\n *\n * name(function bar(){})\n * // => \"bar\"\n *\n * name(Symbol(\"abc\"))\n * // => \"abc\"\n *\n * name(\"foo\")\n * // => \"foo\"\n *\n * name(1)\n * // => null\n */\nconst name = (value) => {\n    if (isString(value)) {\n        return value;\n    }\n    // eslint-disable-next-line no-extra-parens\n    if (isObject(value) && isString(value.name)) {\n        // eslint-disable-next-line no-extra-parens\n        return value.name;\n    }\n    if (isSymbol(value) && isString(value.description)) {\n        return value.description;\n    }\n    return null;\n};\nexport { name };\n//# sourceMappingURL=name.js.map","/**\n * Checks if the given level is considered part of the active level.\n *\n * @private\n * @param incoming Level to check.\n * @param active level to check against.\n * @returns if the given level matches the active level.\n */\nconst matchesLevel = (incoming, active) => incoming.val <= active.val;\nexport { matchesLevel };\n//# sourceMappingURL=matchesLevel.js.map","import { Levels } from \"../level/Levels\";\nimport { matchesLevel } from \"../level/matchesLevel\";\n/**\n * Default {@link Logger} class.\n *\n * @private\n */\nclass DefaultLogger {\n    /**\n     * Creates a new {@link DefaultLogger}.\n     * Should not be constructed directly, rather use {@link Logby.getLogger}.\n     *\n     * @public\n     * @param root Root logger of this logger.\n     * @param name Name of the logger.\n     */\n    constructor(root, name) {\n        this.root = root;\n        this.name = name;\n    }\n    /**\n     * Logs a message.\n     *\n     * @public\n     * @param level Levels of the log.\n     * @param args Arguments to be logged.\n     */\n    log(level, ...args) {\n        if (this.root.level.val >= level.val) {\n            this.root.appenders.forEach(fn => fn(this.name, level, args));\n        }\n    }\n    /**\n     * Logs an error.\n     *\n     * @public\n     * @param args Arguments to be logged.\n     */\n    error(...args) {\n        this.log(Levels.ERROR, ...args);\n    }\n    /**\n     * Logs a warning.\n     *\n     * @public\n     * @param args Arguments to be logged.\n     */\n    warn(...args) {\n        this.log(Levels.WARN, ...args);\n    }\n    /**\n     * Logs an info.\n     *\n     * @public\n     * @param args Arguments to be logged.\n     */\n    info(...args) {\n        this.log(Levels.INFO, ...args);\n    }\n    /**\n     * Logs a debug message.\n     *\n     * @public\n     * @param args Arguments to be logged.\n     */\n    debug(...args) {\n        this.log(Levels.DEBUG, ...args);\n    }\n    /**\n     * Logs a trace message.\n     *\n     * @public\n     * @param args Arguments to be logged.\n     */\n    trace(...args) {\n        this.log(Levels.TRACE, ...args);\n    }\n    /**\n     * Checks if the currently set log level includes error logging.\n     *\n     * @public\n     * @returns if the currently set log level includes error logging.\n     */\n    isError() {\n        return matchesLevel(Levels.ERROR, this.root.level);\n    }\n    /**\n     * Checks if the currently set log level includes warning logging.\n     *\n     * @public\n     * @returns if the currently set log level includes warning logging.\n     */\n    isWarn() {\n        return matchesLevel(Levels.WARN, this.root.level);\n    }\n    /**\n     * Checks if the currently set log level includes info logging.\n     *\n     * @public\n     * @returns if the currently set log level includes info logging.\n     */\n    isInfo() {\n        return matchesLevel(Levels.INFO, this.root.level);\n    }\n    /**\n     * Checks if the currently set log level includes debug logging.\n     *\n     * @public\n     * @returns if the currently set log level includes debug logging.\n     */\n    isDebug() {\n        return matchesLevel(Levels.DEBUG, this.root.level);\n    }\n    /**\n     * Checks if the currently set log level includes trace logging.\n     *\n     * @public\n     * @returns if the currently set log level includes trace logging.\n     */\n    isTrace() {\n        return matchesLevel(Levels.TRACE, this.root.level);\n    }\n}\nexport { DefaultLogger };\n//# sourceMappingURL=DefaultLogger.js.map","import { name } from \"lightdash\";\nimport { defaultLoggingAppender } from \"./appender/defaultLoggingAppender\";\nimport { Levels } from \"./level/Levels\";\nimport { DefaultLogger } from \"./logger/DefaultLogger\";\n/**\n * Main logby class.\n */\nclass Logby {\n    /**\n     * Creates a new Logby instance.\n     */\n    constructor() {\n        this.loggers = new Map();\n        this.appenders = new Set([defaultLoggingAppender]);\n        this.level = Levels.INFO;\n    }\n    /**\n     * Gets and/or creates a logger instance.\n     *\n     * @param nameable String or INameable (ex: named class or named function).\n     * @returns The logger instance.\n     */\n    getLogger(nameable) {\n        const loggerName = name(nameable);\n        if (loggerName == null) {\n            throw new TypeError(`'${nameable}' is neither an INameable nor a string.`);\n        }\n        if (!this.loggers.has(loggerName)) {\n            const logger = new DefaultLogger(this, loggerName);\n            this.loggers.set(loggerName, logger);\n        }\n        return this.loggers.get(loggerName);\n    }\n}\nexport { Logby };\n//# sourceMappingURL=Logby.js.map","import { Logby } from \"logby\";\nconst clingyLogby = new Logby();\nexport { clingyLogby };\n//# sourceMappingURL=logger.js.map","var ArgumentResolving;\n(function (ArgumentResolving) {\n    ArgumentResolving[ArgumentResolving[\"RESOLVE\"] = 0] = \"RESOLVE\";\n    ArgumentResolving[ArgumentResolving[\"IGNORE\"] = 1] = \"IGNORE\";\n})(ArgumentResolving || (ArgumentResolving = {}));\nexport { ArgumentResolving };\n//# sourceMappingURL=ArgumentResolving.js.map","import { isNil } from \"lodash\";\nimport { clingyLogby } from \"../logger\";\n/**\n * Orchestrates mapping of {@link Argument}s to user-provided input.\n *\n * @private\n */\nclass ArgumentMatcher {\n    /**\n     * Matches a list of {@link Argument}s to a list of string input arguments.\n     *\n     * @param expected {@link Argument} list of a {@link ICommand}\n     * @param provided List of user-provided arguments.\n     */\n    constructor(expected, provided) {\n        this.missing = [];\n        this.result = new Map();\n        ArgumentMatcher.logger.debug(\"Matching arguments:\", expected, provided);\n        expected.forEach((expectedArg, i) => {\n            if (i < provided.length) {\n                const providedArg = provided[i];\n                ArgumentMatcher.logger.trace(`Found matching argument for ${expectedArg.name}, adding to result: ${providedArg}`);\n                this.result.set(expectedArg.name, providedArg);\n            }\n            else if (expectedArg.required) {\n                ArgumentMatcher.logger.trace(`No matching argument found for ${expectedArg.name}, adding to missing.`);\n                this.missing.push(expectedArg);\n            }\n            else if (!isNil(expectedArg.defaultValue)) {\n                ArgumentMatcher.logger.trace(`No matching argument found for ${expectedArg.name}, using default: ${expectedArg.defaultValue}`);\n                this.result.set(expectedArg.name, expectedArg.defaultValue);\n            }\n            else {\n                ArgumentMatcher.logger.trace(`No matching argument found for ${expectedArg.name}, using null.`);\n                this.result.set(expectedArg.name, null);\n            }\n        });\n        ArgumentMatcher.logger.debug(`Finished matching arguments: ${expected.length} expected, ${this.result.size} found and ${this.missing.length} missing.`);\n    }\n}\nArgumentMatcher.logger = clingyLogby.getLogger(ArgumentMatcher);\nexport { ArgumentMatcher };\n//# sourceMappingURL=ArgumentMatcher.js.map","import { similar } from \"lightdash\";\n/**\n * Gets similar keys of a key based on their string distance.\n *\n * @private\n * @param mapAliased Map to use for lookup.\n * @param name       Key to use.\n * @return List of similar keys.\n */\nconst getSimilar = (mapAliased, name) => similar(name, Array.from(mapAliased.keys()), false);\nexport { getSimilar };\n//# sourceMappingURL=commandUtil.js.map","var ResultType;\n(function (ResultType) {\n    ResultType[ResultType[\"SUCCESS\"] = 0] = \"SUCCESS\";\n    ResultType[ResultType[\"ERROR_NOT_FOUND\"] = 1] = \"ERROR_NOT_FOUND\";\n    ResultType[ResultType[\"ERROR_MISSING_ARGUMENT\"] = 2] = \"ERROR_MISSING_ARGUMENT\";\n})(ResultType || (ResultType = {}));\nexport { ResultType };\n//# sourceMappingURL=LookupResult.js.map","import { isNil } from \"lodash\";\nimport { ArgumentMatcher } from \"../argument/ArgumentMatcher\";\nimport { Clingy } from \"../Clingy\";\nimport { getSimilar } from \"../command/util/commandUtil\";\nimport { clingyLogby } from \"../logger\";\nimport { ArgumentResolving } from \"./ArgumentResolving\";\nimport { CaseSensitivity } from \"./CaseSensitivity\";\nimport { ResultType } from \"./result/LookupResult\";\n/**\n * Lookup tools for resolving paths through {@link CommandMap}s.\n *\n * @private\n */\nclass LookupResolver {\n    /**\n     * Creates a new {@link LookupResolver}.\n     *\n     * @param caseSensitive If the lookup should honor case.\n     */\n    constructor(caseSensitive = true) {\n        this.caseSensitivity = caseSensitive\n            ? CaseSensitivity.SENSITIVE\n            : CaseSensitivity.INSENSITIVE;\n    }\n    static createSuccessResult(pathNew, pathUsed, command, args) {\n        const lookupSuccess = {\n            successful: true,\n            pathUsed,\n            pathDangling: pathNew,\n            type: ResultType.SUCCESS,\n            command,\n            args\n        };\n        LookupResolver.logger.debug(\"Returning successful lookup result:\", lookupSuccess);\n        return lookupSuccess;\n    }\n    static createNotFoundResult(pathNew, pathUsed, currentPathFragment, commandMap) {\n        LookupResolver.logger.warn(`Command '${currentPathFragment}' could not be found.`);\n        return {\n            successful: false,\n            pathUsed,\n            pathDangling: pathNew,\n            type: ResultType.ERROR_NOT_FOUND,\n            missing: currentPathFragment,\n            similar: getSimilar(commandMap, currentPathFragment)\n        };\n    }\n    static createMissingArgsResult(pathNew, pathUsed, missing) {\n        LookupResolver.logger.warn(\"Some arguments could not be found:\", missing);\n        return {\n            successful: false,\n            pathUsed,\n            pathDangling: pathNew,\n            type: ResultType.ERROR_MISSING_ARGUMENT,\n            missing\n        };\n    }\n    /**\n     * Resolves a pathUsed through a {@link CommandMap}.\n     *\n     * @param commandMap        Map to use.\n     * @param path              Path to getPath.\n     * @param argumentResolving Strategy for resolving arguments.\n     * @return Lookup result, either {@link LookupSuccess}, {@link LookupErrorNotFound}\n     * or {@link LookupErrorMissingArgs}.\n     */\n    resolve(commandMap, path, argumentResolving) {\n        if (path.length === 0) {\n            throw new Error(\"Path cannot be empty.\");\n        }\n        return this.resolveInternal(commandMap, path, [], argumentResolving);\n    }\n    resolveInternal(commandMap, path, pathUsed, argumentResolving) {\n        const currentPathFragment = path[0];\n        const pathNew = path.slice(1);\n        pathUsed.push(currentPathFragment);\n        if (!this.hasCommand(commandMap, currentPathFragment)) {\n            return LookupResolver.createNotFoundResult(pathNew, pathUsed, currentPathFragment, commandMap);\n        }\n        // We already checked if the key exists, assert its existence.\n        const command = (commandMap.getCommand(currentPathFragment, this.caseSensitivity));\n        LookupResolver.logger.debug(`Found command: '${currentPathFragment}'.`);\n        /*\n         * Recurse into sub-commands if:\n         * Additional items are in the path AND\n         * the current command has sub-commands AND\n         * the sub-commands contain the next path item.\n         */\n        if (pathNew.length > 0 &&\n            command.sub instanceof Clingy &&\n            this.hasCommand(command.sub.mapAliased, pathNew[0])) {\n            return this.resolveInternalSub(pathNew, pathUsed, command, argumentResolving);\n        }\n        /*\n         * Skip checking for arguments if:\n         * The parameter argumentResolving is set to ignore arguments OR\n         * the command has no arguments defined OR\n         * the command has an empty array defined as arguments.\n         */\n        let argumentsResolved;\n        if (argumentResolving === ArgumentResolving.IGNORE ||\n            isNil(command.args) ||\n            command.args.length === 0) {\n            LookupResolver.logger.debug(\"No arguments defined, using empty map.\");\n            argumentsResolved = new Map();\n        }\n        else {\n            LookupResolver.logger.debug(`Looking up arguments: '${pathNew}'.`);\n            const argumentMatcher = new ArgumentMatcher(command.args, pathNew);\n            if (argumentMatcher.missing.length > 0) {\n                return LookupResolver.createMissingArgsResult(pathNew, pathUsed, argumentMatcher.missing);\n            }\n            argumentsResolved = argumentMatcher.result;\n            LookupResolver.logger.debug(\"Successfully looked up arguments: \", argumentsResolved);\n        }\n        return LookupResolver.createSuccessResult(pathNew, pathUsed, command, argumentsResolved);\n    }\n    resolveInternalSub(pathNew, pathUsed, command, argumentResolving) {\n        LookupResolver.logger.debug(\"Resolving sub-commands:\", command.sub, pathNew);\n        return this.resolveInternal(command.sub.mapAliased, pathNew, pathUsed, argumentResolving);\n    }\n    hasCommand(commandMap, pathPart) {\n        return commandMap.hasCommand(pathPart, this.caseSensitivity);\n    }\n}\nLookupResolver.logger = clingyLogby.getLogger(LookupResolver);\nexport { LookupResolver };\n//# sourceMappingURL=LookupResolver.js.map","import { compact } from \"lodash\";\nimport { clingyLogby } from \"../logger\";\n/**\n * Manages parsing input strings into a path list.\n *\n * @private\n */\nclass InputParser {\n    /**\n     * Creates an {@link InputParser}.\n     *\n     * @param legalQuotes List of quotes to use when parsing strings.\n     */\n    constructor(legalQuotes = [\"\\\"\"]) {\n        this.legalQuotes = legalQuotes;\n        this.pattern = this.generateMatcher();\n    }\n    /**\n     * Parses an input string.\n     *\n     * @param input Input string to parse.\n     * @return Path list.\n     */\n    parse(input) {\n        InputParser.logger.debug(`Parsing input '${input}'`);\n        const result = [];\n        const pattern = new RegExp(this.pattern);\n        let match;\n        // Noinspection AssignmentResultUsedJS\n        while ((match = pattern.exec(input))) {\n            InputParser.logger.trace(`Found match '${match}'`);\n            const groups = compact(match.slice(1));\n            if (groups.length > 0) {\n                InputParser.logger.trace(`Found group '${groups[0]}'`);\n                result.push(groups[0]);\n            }\n        }\n        return result;\n    }\n    generateMatcher() {\n        InputParser.logger.debug(\"Creating matcher.\");\n        const matchBase = \"(\\\\S+)\";\n        const matchItems = this.legalQuotes\n            .map((str) => `\\\\${str}`)\n            .map(quote => `${quote}(.+?)${quote}`);\n        matchItems.push(matchBase);\n        let result;\n        try {\n            result = new RegExp(matchItems.join(\"|\"), \"g\");\n        }\n        catch (e) {\n            InputParser.logger.error(\"The parsing pattern is invalid, this should never happen.\", e);\n            throw e;\n        }\n        return result;\n    }\n}\nInputParser.logger = clingyLogby.getLogger(InputParser);\nexport { InputParser };\n//# sourceMappingURL=InputParser.js.map","import { CommandMap } from \"./command/CommandMap\";\nimport { clingyLogby } from \"./logger\";\nimport { ArgumentResolving } from \"./lookup/ArgumentResolving\";\nimport { LookupResolver } from \"./lookup/LookupResolver\";\nimport { InputParser } from \"./parser/InputParser\";\n/**\n * Core {@link Clingy} class, entry point for creation of a new instance.\n */\nclass Clingy {\n    /**\n     * Creates a new {@link Clingy} instance.\n     *\n     * @param commands      Map of commands to create the instance with.\n     * @param options       Option object.\n     */\n    constructor(commands = {}, options = {}) {\n        this.lookupResolver = new LookupResolver(options.caseSensitive);\n        this.inputParser = new InputParser(options.legalQuotes);\n        this.map = CommandMap.createWithOptions(commands, options);\n        this.mapAliased = new CommandMap();\n        this.updateAliases();\n    }\n    /**\n     * Sets a command on this instance.\n     *\n     * @param key Key of the command.\n     * @param command The command.\n     */\n    setCommand(key, command) {\n        this.map.set(key, command);\n        this.updateAliases();\n    }\n    // TODO replace .get() with .getCommand() (breaking)\n    /**\n     * Gets a command from this instance.\n     *\n     * @param key Key of the command.\n     */\n    getCommand(key) {\n        return this.mapAliased.get(key);\n    }\n    // Noinspection JSUnusedGlobalSymbols\n    // TODO replace .has() with .hasCommand() (breaking)\n    /**\n     * Checks if a command on this instance exists for this key.\n     *\n     * @param key Key of the command.\n     */\n    hasCommand(key) {\n        return this.mapAliased.has(key);\n    }\n    // Noinspection JSUnusedGlobalSymbols\n    /**\n     * Checks if a pathUsed resolves to a command.\n     *\n     * @param path Path to look up.\n     * @return If the pathUsed resolves to a command.\n     */\n    hasPath(path) {\n        return this.getPath(path).successful;\n    }\n    /**\n     * Resolves a pathUsed to a command.\n     *\n     * @param path Path to look up.\n     * @return Lookup result, either {@link ILookupSuccess} or {@link ILookupErrorNotFound}.\n     */\n    getPath(path) {\n        Clingy.logger.debug(`Resolving pathUsed: ${path}`);\n        return this.lookupResolver.resolve(this.mapAliased, path, ArgumentResolving.IGNORE);\n    }\n    /**\n     * Parses a string into a command and arguments.\n     *\n     * @param input String to parse.\n     * @return Lookup result, either {@link ILookupSuccess}, {@link ILookupErrorNotFound}\n     * or {@link ILookupErrorMissingArgs}.\n     */\n    parse(input) {\n        Clingy.logger.debug(`Parsing input: '${input}'`);\n        return this.lookupResolver.resolve(this.mapAliased, this.inputParser.parse(input), ArgumentResolving.RESOLVE);\n    }\n    /**\n     * @private\n     */\n    updateAliases() {\n        Clingy.logger.debug(\"Updating aliased map.\");\n        this.mapAliased.clear();\n        this.map.forEach((value, key) => {\n            this.mapAliased.set(key, value);\n            value.alias.forEach(alias => {\n                if (this.mapAliased.has(alias)) {\n                    Clingy.logger.warn(`Alias '${alias}' conflicts with a previously defined key, will be ignored.`);\n                }\n                else {\n                    Clingy.logger.trace(`Created alias '${alias}' for '${key}'`);\n                    this.mapAliased.set(alias, value);\n                }\n            });\n        });\n        Clingy.logger.debug(\"Done updating aliased map.\");\n    }\n}\nClingy.logger = clingyLogby.getLogger(Clingy);\nexport { Clingy };\n//# sourceMappingURL=Clingy.js.map"],"names":["isMap","isPlainObject","forEach","isObject","concat","isString","isSymbol","isNil","compact"],"mappings":"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"}