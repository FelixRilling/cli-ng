
/**
    * Key: make lowercase unless caseSensitive is enabled
    * Value: merge with default command structure and add key as name property
    */
const commandKey = caseSensitive
    ? command[0]
    : command[0].toLowerCase();
const commandValue = objDefaultsDeep(
    command[1],
    commandDefaultFactory(index)
);

//Save key as name property to keep track in aliases
commandValue.name = commandKey;
//Merge each arg with default arg structure
commandValue.args = commandValue.args.map((arg, index) =>
    objDefaults(arg, argDefaultFactory(index))
);

//If sub-groups exist, recurse by creating a new Clingy instance
if (commandValue.sub !== null) {
    commandValue.sub = new Clingy(commandValue.sub);
}

return [commandKey, commandValue];
