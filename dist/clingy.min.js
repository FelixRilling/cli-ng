var Clingy=function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function r(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}const e=(n,t)=>typeof n===t,i=Array.isArray,s=n=>e(n,"undefined"),a=n=>null==n,o=n=>!a(n)&&e(n,"object"),u=n=>e(n,"string"),c=(n,t)=>{Object.entries(n).forEach((r,e)=>{t(r[0],r[1],e,n)})},f=(n,t)=>{const r=n.length;const e=t.length;if(0===r)return e;if(0===e)return r;const i=[];for(let n=0;n<=e;n++)i[n]=[n];for(let n=0;n<=r;n++)i[0][n]=n;for(let s=1;s<=e;s++){const e=i[s],a=i[s-1];for(let i=1;i<=r;i++)if(t.charAt(s-1)===n.charAt(i-1))e[i]=a[i-1];else{const n=a[i-1]+1,t=e[i-1]+1,r=a[i]+1;e[i]=Math.min(n,t,r)}}return i[e][r]},l=(n,t)=>{const r=new Map;n.forEach((e,i)=>{const s=t(e,i,n);r.set(s,r.has(s)?[...r.get(s),e]:[e])});return r},h=(n,t,r=!1)=>{const e=l(t,t=>f(n,t));return r?e:e.get(Math.min(...e.keys()))},m=n=>Object.assign({},n),g=(n,t)=>{const r=i(n)?Array.from(n):m(n);c(t,(t,e)=>{s(n[t])&&(r[t]=e)});return r},p=(n,t)=>{const r=i(n)?Array.from(n):m(n);c(t,(t,e)=>{const i=n[t];o(e)?r[t]=o(i)?p(i,e):e:r[t]=s(i)?e:i});return r};var d=function(n){return{name:"arg".concat(n),required:!0,default:null}},v=function(n,t){var r={args:{_all:t},missing:[]};return n.forEach(function(n,e){var i=t[e];i?r.args[n.name]=i:n.required?r.missing.push(n):r.args[n.name]=n.default}),r},y=function(n){return{name:"command".concat(n),fn:function(){},alias:[],args:[],sub:null}},w=function(n,t){return new Map(n.map(function(n,r){if(!u(n[0]))throw new Error("command key '".concat(n[0],"' is not a string"));var e=t?n[0]:n[0].toLowerCase(),i=p(n[1],y(r));return i.name=e,i.args=i.args.map(function(n,t){return g(n,d(t))}),null!==i.sub&&(i.sub=new C(i.sub)),[e,i]}))},A=function(n){var t=new Map(n);return n.forEach(function(n){n.alias.forEach(function(r){if(t.has(r))throw new Error("Alias '".concat(r,"' conflicts with a previously defined key"));t.set(r,n)})}),t},b={caseSensitive:!1,validQuotes:['"',"“","”"]},E=/\s/,k=function(n,t){var r=[],e=[],i=!1;return n.trim().split("").forEach(function(s,a){var o=E.test(s);t.includes(s)?i=!i:!i&&o||e.push(s),(e.length>0&&o&&!i||a===n.length-1)&&(r.push(e.join("")),e=[])}),r},C=function(){function t(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.options=p(e,b),this.map=w(Object.entries(r),this.options.caseSensitive),this.mapAliased=A(this.map)}return r(t,[{key:"getAll",value:function(){return{map:this.map,mapAliased:this.mapAliased}}},{key:"getCommand",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(n.length<1)throw new TypeError("Path does not contain at least one item");var r=this.options.caseSensitive?n[0]:n[0].toLowerCase(),e=t;if(!this.mapAliased.has(r))return{success:!1,error:{type:"missingCommand",missing:[r],similar:h(r,Array.from(this.mapAliased.keys()))},path:e};var i=this.mapAliased.get(r),s=n.slice(1);if(e.push(r),n.length>1&&null!==i.sub){var a=i.sub.getCommand(s,e);if(a.success)return a}return{success:!0,command:i,path:e,pathDangling:s}}},{key:"parse",value:function(n){var t=k(n,this.options.validQuotes),r=this.getCommand(t);if(!r.success)return r;var e=r.command,i=r.pathDangling,s=v(e.args,i);return 0!==s.missing.length?{success:!1,error:{type:"missingArg",missing:s.missing}}:(r.args=s.args,r)}}]),t}();return C}();
//# sourceMappingURL=clingy.min.js.map
